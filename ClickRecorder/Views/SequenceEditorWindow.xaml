<Window x:Class="ClickRecorder.Views.SequenceEditorWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:helpers="clr-namespace:ClickRecorder.Helpers"
        Title="Editor sekvencí" Height="760" Width="1280"
        MinWidth="1080" MinHeight="620"
        WindowStartupLocation="CenterOwner"
        Background="{DynamicResource Brush.Background}">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="{DynamicResource Brush.SurfaceAlt}" Padding="14,10" CornerRadius="8" Margin="0,0,0,8">
            <StackPanel>
                <TextBlock Text="EDITOR SEKVENCÍ" FontSize="17" FontWeight="Bold" Foreground="{DynamicResource Brush.TextPrimary}"/>
                <TextBlock Text="Upravuj pořadí kroků, názvy, popis, čekání i přesuny kroků mezi sekvencemi."
                           Foreground="{DynamicResource Brush.TextSecondary}" FontSize="11" Margin="0,3,0,0"/>
            </StackPanel>
        </Border>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="320"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="330"/>
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" Style="{StaticResource Card}" Margin="0,0,8,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <TextBlock Text="SEKVENCE" Style="{StaticResource Sec}" Margin="0,0,0,8"/>
                    <ListBox x:Name="SequenceList" Grid.Row="1" SelectionChanged="SequenceList_SelectionChanged" FontFamily="Consolas" FontSize="11"/>
                    <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,8,0,0">
                        <Button Content="Nová" Style="{StaticResource BBlue}" Click="BtnNewSequence_Click" Margin="0,0,4,0"/>
                        <Button x:Name="BtnDeleteSequence" Content="Smazat" Style="{StaticResource BRed}" Click="BtnDeleteSequence_Click" IsEnabled="False" Margin="0,0,4,0"/>
                        <Button x:Name="BtnLoadToRecorder" Content="Načíst" Style="{StaticResource BGray}" Click="BtnLoadToRecorder_Click" IsEnabled="False"/>
                    </StackPanel>
                </Grid>
            </Border>

            <Border Grid.Column="1" Style="{StaticResource Card}" Margin="0,0,8,0">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <DockPanel>
                        <TextBlock x:Name="TxtStepsHeader" Text="KROKY" Style="{StaticResource Sec}" DockPanel.Dock="Left" Margin="0"/>
                        <TextBlock x:Name="TxtStepsCount" Foreground="{DynamicResource Brush.TextSecondary}" FontSize="11" DockPanel.Dock="Right" VerticalAlignment="Center"/>
                    </DockPanel>
                    <ListBox x:Name="StepList" Grid.Row="1" SelectionChanged="StepList_SelectionChanged" FontFamily="Consolas" FontSize="11"/>
                    <WrapPanel Grid.Row="2" Margin="0,8,0,0">
                        <Button Content="Nahoru" Style="{StaticResource BGray}" Click="BtnStepUp_Click" Margin="0,0,4,0"/>
                        <Button Content="Dolů" Style="{StaticResource BGray}" Click="BtnStepDown_Click" Margin="0,0,4,0"/>
                        <Button Content="Přidat krok" Style="{StaticResource BBlue}" Click="BtnAddStep_Click" Margin="0,0,4,0"/>
                        <Button x:Name="BtnDeleteStep" Content="Smazat krok" Style="{StaticResource BRed}" Click="BtnDeleteStep_Click" IsEnabled="False" Margin="0,0,4,0"/>
                        <Button x:Name="BtnMoveStep" Content="Přesunout" Style="{StaticResource BGray}" Click="BtnMoveStep_Click" IsEnabled="False"/>
                    </WrapPanel>
                </Grid>
            </Border>

            <Border Grid.Column="2" Style="{StaticResource Card}">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <TextBlock Text="DETAIL" Style="{StaticResource Sec}"/>

                        <TextBlock Text="Název sekvence" Style="{StaticResource Lbl}"/>
                        <TextBox x:Name="TxtSequenceName" Margin="0,0,0,6" TextChanged="MarkDirty"/>

                        <TextBlock Text="Popis sekvence" Style="{StaticResource Lbl}"/>
                        <TextBox x:Name="TxtSequenceDescription" Height="58" Margin="0,0,0,6" TextWrapping="Wrap" AcceptsReturn="True" TextChanged="MarkDirty"/>

                        <Separator Margin="0,2,0,8"/>
                        <TextBlock Text="KROK" Style="{StaticResource Sec}"/>

                        <TextBlock Text="Název kroku" Style="{StaticResource Lbl}"/>
                        <TextBox x:Name="TxtStepName" Margin="0,0,0,6" TextChanged="MarkDirty" helpers:PlaceholderService.Text="Krok 1"/>

                        <TextBlock Text="Popis kroku" Style="{StaticResource Lbl}"/>
                        <TextBox x:Name="TxtStepDescription" Height="54" Margin="0,0,0,6" TextWrapping="Wrap" AcceptsReturn="True" TextChanged="MarkDirty"/>

                        <TextBlock Text="Typ akce" Style="{StaticResource Lbl}"/>
                        <ComboBox x:Name="CboActionKind" Margin="0,0,0,6" SelectionChanged="MarkDirtyCombo">
                            <ComboBoxItem Content="Click"/>
                            <ComboBoxItem Content="TypeText"/>
                        </ComboBox>

                        <TextBlock Text="Tlačítko myši" Style="{StaticResource Lbl}"/>
                        <ComboBox x:Name="CboButton" Margin="0,0,0,6" SelectionChanged="MarkDirtyCombo">
                            <ComboBoxItem Content="Left"/>
                            <ComboBoxItem Content="Right"/>
                            <ComboBoxItem Content="Middle"/>
                            <ComboBoxItem Content="Double"/>
                        </ComboBox>

                        <TextBlock Text="Text k vyplnění" Style="{StaticResource Lbl}"/>
                        <TextBox x:Name="TxtTextToType" Margin="0,0,0,6" TextChanged="MarkDirty"/>

                        <TextBlock Text="Čekání po předchozím kroku (ms)" Style="{StaticResource Lbl}"/>
                        <TextBox x:Name="TxtDelayMs" Margin="0,0,0,6" TextChanged="MarkDirty" helpers:PlaceholderService.Text="0"/>

                        <TextBlock Text="Přesunout krok do sekvence" Style="{StaticResource Lbl}"/>
                        <ComboBox x:Name="CboMoveTarget" Margin="0,0,0,8" DisplayMemberPath="Name"/>

                        <WrapPanel>
                            <Button x:Name="BtnSaveStep" Content="Uložit krok" Style="{StaticResource BGreen}" Click="BtnSaveStep_Click" IsEnabled="False" Margin="0,0,4,0"/>
                            <Button x:Name="BtnSaveSequence" Content="Uložit sekvenci" Style="{StaticResource BGreen}" Click="BtnSaveSequence_Click" IsEnabled="False"/>
                        </WrapPanel>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>

        <Border Grid.Row="2" Background="{DynamicResource Brush.SurfaceAlt}" Padding="12,7" CornerRadius="6" Margin="0,8,0,0">
            <DockPanel>
                <TextBlock x:Name="TxtFooter" Foreground="{DynamicResource Brush.TextSecondary}" FontSize="11" VerticalAlignment="Center" Text="Připraveno"/>
                <StackPanel Orientation="Horizontal" DockPanel.Dock="Right">
                    <Button Content="Import" Style="{StaticResource BBlue}" Click="BtnImport_Click" Margin="0,0,8,0"/>
                    <Button Content="Export" Style="{StaticResource BBlue}" Click="BtnExport_Click" Margin="0,0,8,0"/>
                    <Button Content="Zavřít" Style="{StaticResource BGray}" Click="BtnClose_Click"/>
                </StackPanel>
            </DockPanel>
        </Border>
    </Grid>
</Window>
