<Window x:Class="ClickRecorder.Views.JobsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:helpers="clr-namespace:ClickRecorder.Helpers"
        Title="ðŸ“… Joby &amp; Historie" Height="750" Width="1100"
        MinWidth="900" MinHeight="500"
        WindowStartupLocation="CenterOwner"
        Background="#1E1E2E">
    <Window.Resources>
        <Style x:Key="Card" TargetType="Border">
            <Setter Property="Background" Value="#313244"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="14"/>
        </Style>
        <Style x:Key="Sec" TargetType="TextBlock">
            <Setter Property="FontSize" Value="10"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Foreground" Value="#89B4FA"/>
            <Setter Property="Margin" Value="0,0,0,8"/>
        </Style>
        <Style x:Key="Lbl" TargetType="TextBlock">
            <Setter Property="FontSize" Value="11"/>
            <Setter Property="Foreground" Value="#6C7086"/>
            <Setter Property="Margin" Value="0,0,0,3"/>
        </Style>
        <Style TargetType="TextBox">
            <Setter Property="Background" Value="#181825"/>
            <Setter Property="Foreground" Value="#CDD6F4"/>
            <Setter Property="BorderBrush" Value="#45475A"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="7,5"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="CaretBrush" Value="#CDD6F4"/>
        </Style>
        <Style TargetType="ComboBox">
            <Setter Property="Background" Value="#181825"/>
            <Setter Property="Foreground" Value="#CDD6F4"/>
            <Setter Property="BorderBrush" Value="#45475A"/>
            <Setter Property="Padding" Value="7,4"/>
            <Setter Property="FontSize" Value="12"/>
        </Style>
        <Style x:Key="Btn" TargetType="Button">
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True"><Setter Property="Opacity" Value="0.80"/></Trigger>
                            <Trigger Property="IsEnabled"   Value="False"><Setter Property="Opacity" Value="0.30"/></Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="BBlue"   TargetType="Button" BasedOn="{StaticResource Btn}">
            <Setter Property="Background" Value="#89B4FA"/>
            <Setter Property="Foreground" Value="#1E1E2E"/>
        </Style>
        <Style x:Key="BGreen"  TargetType="Button" BasedOn="{StaticResource Btn}">
            <Setter Property="Background" Value="#A6E3A1"/>
            <Setter Property="Foreground" Value="#1E1E2E"/>
        </Style>
        <Style x:Key="BRed"    TargetType="Button" BasedOn="{StaticResource Btn}">
            <Setter Property="Background" Value="#F38BA8"/>
            <Setter Property="Foreground" Value="#1E1E2E"/>
        </Style>
        <Style x:Key="BOrange" TargetType="Button" BasedOn="{StaticResource Btn}">
            <Setter Property="Background" Value="#FAB387"/>
            <Setter Property="Foreground" Value="#1E1E2E"/>
        </Style>
        <Style x:Key="BGray"   TargetType="Button" BasedOn="{StaticResource Btn}">
            <Setter Property="Background" Value="#585B70"/>
            <Setter Property="Foreground" Value="#CDD6F4"/>
        </Style>
        <Style TargetType="ListBox">
            <Setter Property="Background" Value="#181825"/>
            <Setter Property="BorderBrush" Value="#45475A"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Foreground" Value="#CDD6F4"/>
            <Setter Property="FontFamily" Value="Consolas"/>
            <Setter Property="FontSize" Value="11.5"/>
        </Style>
        <Style TargetType="ListBoxItem">
            <Setter Property="Padding" Value="8,4"/>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#45475A"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style TargetType="TabItem">
            <Setter Property="Foreground" Value="#6C7086"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="14,8"/>
            <Setter Property="Background" Value="#252535"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Foreground" Value="#89B4FA"/>
                    <Setter Property="Background" Value="#313244"/>
                </Trigger>
            </Style.Triggers>
        </Style>
        <Style TargetType="TabControl">
            <Setter Property="Background" Value="#1E1E2E"/>
            <Setter Property="BorderThickness" Value="0"/>
        </Style>
        <Style TargetType="Separator"><Setter Property="Background" Value="#45475A"/><Setter Property="Margin" Value="0,8"/></Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Background="#252535" Padding="18,12">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <StackPanel>
                    <TextBlock Text="ðŸ“…  Joby &amp; Historie" FontSize="18" FontWeight="Bold" Foreground="#CDD6F4"/>
                    <TextBlock Foreground="#6C7086" FontSize="11" Margin="0,3,0,0"
                               Text="PlÃ¡nuj automatickÃ© spouÅ¡tÄ›nÃ­ testÅ¯ Â· ProchÃ¡zej historii Â· VÅ¡echna data v SQLite"/>
                </StackPanel>
                <Border Grid.Column="1" x:Name="SchedulerBadge"
                        Background="#1a3328" CornerRadius="6" Padding="12,6" VerticalAlignment="Center">
                    <TextBlock x:Name="TxtSchedulerStatus"
                               Text="â° Scheduler: Zastaven"
                               Foreground="#A6E3A1" FontSize="11" FontWeight="SemiBold"/>
                </Border>
            </Grid>
        </Border>

        <!-- Tabs -->
        <TabControl Grid.Row="1" Margin="12,8,12,4">

            <!-- â•â• TAB 1: JOBS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <TabItem Header="ðŸ“…  Joby">
                <Grid Margin="0,10,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="340"/>
                    </Grid.ColumnDefinitions>

                    <!-- Job list -->
                    <Border Style="{StaticResource Card}" Margin="0,0,10,0">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <DockPanel Margin="0,0,0,10">
                                <TextBlock Text="NAPLÃNOVANÃ‰ JOBY" Style="{StaticResource Sec}"
                                           DockPanel.Dock="Left" Margin="0"/>
                                <StackPanel Orientation="Horizontal" DockPanel.Dock="Right">
                                    <Button x:Name="BtnStartScheduler" Content="â–¶ Spustit scheduler"
                                            Style="{StaticResource BGreen}" Click="BtnStartScheduler_Click"
                                            Margin="0,0,6,0" FontSize="10" Padding="8,4"/>
                                    <Button x:Name="BtnStopScheduler" Content="â¹ Zastavit"
                                            Style="{StaticResource BRed}" Click="BtnStopScheduler_Click"
                                            IsEnabled="False" FontSize="10" Padding="8,4"/>
                                </StackPanel>
                            </DockPanel>

                            <ListBox x:Name="JobList" Grid.Row="1"
                                     SelectionChanged="JobList_SelectionChanged"/>

                            <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="0,8,0,0">
                                <Button x:Name="BtnRunNow" Content="â–¶ Spustit teÄ"
                                        Style="{StaticResource BGreen}" Click="BtnRunNow_Click"
                                        Margin="0,0,8,0" IsEnabled="False"/>
                                <Button x:Name="BtnPauseJob" Content="â¸ Pozastavit"
                                        Style="{StaticResource BOrange}" Click="BtnPauseJob_Click"
                                        Margin="0,0,8,0" IsEnabled="False"/>
                                <Button x:Name="BtnDeleteJob" Content="ðŸ—‘ Smazat"
                                        Style="{StaticResource BRed}" Click="BtnDeleteJob_Click"
                                        IsEnabled="False"/>
                            </StackPanel>
                        </Grid>
                    </Border>

                    <!-- New job form -->
                    <Border Grid.Column="1" Style="{StaticResource Card}">
                        <ScrollViewer VerticalScrollBarVisibility="Auto">
                            <StackPanel>
                                <TextBlock Text="NOVÃ JOB" Style="{StaticResource Sec}"/>

                                <TextBlock Text="NÃ¡zev jobu" Style="{StaticResource Lbl}"/>
                                <TextBox x:Name="TxtJobName" Margin="0,0,0,8"/>

                                <TextBlock Text="Sekvence kliknutÃ­" Style="{StaticResource Lbl}"/>
                                <ComboBox x:Name="CboJobSequence" Margin="0,0,0,8"
                                          DisplayMemberPath="Name"/>

                                <TextBlock Text="Typ plÃ¡novÃ¡nÃ­" Style="{StaticResource Lbl}"/>
                                <ComboBox x:Name="CboScheduleType" Margin="0,0,0,8"
                                          SelectionChanged="CboScheduleType_Changed">
                                    <ComboBoxItem Content="ðŸ• Jednou (v urÄitÃ½ Äas)" IsSelected="True"/>
                                    <ComboBoxItem Content="ðŸ” Interval (kaÅ¾dÃ½ch N minut)"/>
                                    <ComboBoxItem Content="â° KaÅ¾dou hodinu"/>
                                    <ComboBoxItem Content="ðŸ“… DennÄ› (v urÄitÃ½ Äas)"/>
                                </ComboBox>

                                <!-- Once / Daily: datetime -->
                                <StackPanel x:Name="PanelRunAt">
                                    <TextBlock Text="Datum a Äas (yyyy-MM-dd HH:mm)" Style="{StaticResource Lbl}"/>
                                    <TextBox x:Name="TxtRunAt"
         helpers:PlaceholderService.IsMonitoring="True"
         helpers:PlaceholderService.Text="2026-03-01 08:00"
         Margin="0,0,0,8"/>
                                </StackPanel>

                                <!-- Interval: minutes -->
                                <StackPanel x:Name="PanelInterval" Visibility="Collapsed">
                                    <TextBlock Text="Interval (minuty)" Style="{StaticResource Lbl}"/>
                                    <TextBox x:Name="TxtIntervalMins" Text="60" Margin="0,0,0,8"/>
                                </StackPanel>

                                <Separator/>

                                <Grid Margin="0,0,0,8">
                                    <Grid.ColumnDefinitions><ColumnDefinition/><ColumnDefinition/></Grid.ColumnDefinitions>
                                    <StackPanel Grid.Column="0" Margin="0,0,6,0">
                                        <TextBlock Text="OpakovÃ¡nÃ­" Style="{StaticResource Lbl}"/>
                                        <TextBox x:Name="TxtJobRepeat" Text="1"/>
                                    </StackPanel>
                                    <StackPanel Grid.Column="1">
                                        <TextBlock Text="Rychlost Ã—" Style="{StaticResource Lbl}"/>
                                        <TextBox x:Name="TxtJobSpeed" Text="1.0"/>
                                    </StackPanel>
                                </Grid>

                                <CheckBox x:Name="ChkJobStopOnError"  Content="Zastavit pÅ™i prvnÃ­ chybÄ›" Margin="0,0,0,4"/>
                                <CheckBox x:Name="ChkJobScreenshots"  Content="Screenshot pÅ™i chybÄ›"     Margin="0,0,0,12"/>

                                <Button Content="âž• PÅ™idat job" Style="{StaticResource BBlue}"
                                        Click="BtnAddJob_Click" HorizontalAlignment="Stretch"/>
                            </StackPanel>
                        </ScrollViewer>
                    </Border>
                </Grid>
            </TabItem>

            <!-- â•â• TAB 2: SEQUENCES â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <TabItem Header="ðŸ“‚  Sekvence">
                <Border Style="{StaticResource Card}" Margin="0,10,0,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <DockPanel Margin="0,0,0,10">
                            <TextBlock Text="ULOÅ½ENÃ‰ SEKVENCE" Style="{StaticResource Sec}"
                                       DockPanel.Dock="Left" Margin="0"/>
                            <StackPanel Orientation="Horizontal" DockPanel.Dock="Right">
                                <Button x:Name="BtnLoadSequence" Content="ðŸ“‚ NaÄÃ­st do recorderu"
                                        Style="{StaticResource BGreen}" Click="BtnLoadSequence_Click"
                                        Margin="0,0,8,0" IsEnabled="False" FontSize="11"/>
                                <Button x:Name="BtnDeleteSequence" Content="ðŸ—‘ Smazat"
                                        Style="{StaticResource BRed}" Click="BtnDeleteSequence_Click"
                                        IsEnabled="False" FontSize="11"/>
                            </StackPanel>
                        </DockPanel>

                        <ListBox x:Name="SequenceList" Grid.Row="1"
                                 SelectionChanged="SequenceList_SelectionChanged"/>
                    </Grid>
                </Border>
            </TabItem>

            <!-- â•â• TAB 3: HISTORY â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <TabItem Header="ðŸ“Š  Historie">
                <Grid Margin="0,10,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="320"/>
                    </Grid.ColumnDefinitions>

                    <Border Style="{StaticResource Card}" Margin="0,0,10,0">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <DockPanel Margin="0,0,0,10">
                                <TextBlock Text="BÄšHY TESTÅ®" Style="{StaticResource Sec}"
                                           DockPanel.Dock="Left" Margin="0"/>
                                <Button Content="ðŸ”„ Obnovit" Style="{StaticResource BGray}"
                                        Click="BtnRefreshHistory_Click" DockPanel.Dock="Right"
                                        FontSize="10" Padding="8,4"/>
                            </DockPanel>
                            <ListBox x:Name="HistoryList" Grid.Row="1"
                                     SelectionChanged="HistoryList_SelectionChanged"/>
                        </Grid>
                    </Border>

                    <!-- Session detail -->
                    <Border Grid.Column="1" Style="{StaticResource Card}">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <TextBlock Text="DETAIL SESSION" Style="{StaticResource Sec}"/>
                            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                                <TextBlock x:Name="TxtSessionDetail"
                                           Text="â† Vyber session"
                                           Foreground="#6C7086" FontFamily="Consolas"
                                           FontSize="11" TextWrapping="Wrap" Padding="4"/>
                            </ScrollViewer>
                        </Grid>
                    </Border>
                </Grid>
            </TabItem>

            <!-- â•â• TAB 4: SCHEDULER LOG â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <TabItem Header="ðŸ“‹  Log">
                <Border Style="{StaticResource Card}" Margin="0,10,0,0">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <DockPanel Margin="0,0,0,10">
                            <TextBlock Text="SCHEDULER LOG" Style="{StaticResource Sec}"
                                       DockPanel.Dock="Left" Margin="0"/>
                            <Button Content="Vymazat" Style="{StaticResource BGray}"
                                    Click="BtnClearLog_Click" DockPanel.Dock="Right"
                                    FontSize="10" Padding="8,4"/>
                        </DockPanel>
                        <ListBox x:Name="SchedulerLog" Grid.Row="1" FontFamily="Consolas" FontSize="11"/>
                    </Grid>
                </Border>
            </TabItem>
        </TabControl>

        <!-- Footer -->
        <Border Grid.Row="2" Background="#252535" Padding="14,6" Margin="12,0,12,8" CornerRadius="6">
            <TextBlock x:Name="TxtFooter" Foreground="#6C7086" FontSize="11"
                       Text="DatabÃ¡ze: %AppData%\ClickRecorder\clickrecorder.db"/>
        </Border>
    </Grid>
</Window>
